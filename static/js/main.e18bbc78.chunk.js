(this.webpackJsonpdrum_machine=this.webpackJsonpdrum_machine||[]).push([[0],{26:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),s=a.n(o),i=a(7),c=a(8),u=a(15),l=a(2),d={TOOGLE_POWER:"TOOGLE_POWER",CHG_VOLUME:"CHANGE_VOLUME",CHG_BANK:"CHANGE_BANK",DRUMPAD_PRESS:"DRUMPAD_PRESS",TOGGLE_OVERLAY:"TOOGLE_OVERLAY",SET_AUDIO:"SET_AUDIO",PLAY_PAUSE:"PLAY_PAUSE",RESET_AUDIO:"RESET_AUDIO"},m={isPowerOn:!0,volume:50,currentBank:0,currentSfx:"",isOverlayShow:!1,audio:null,audioName:"",isAudioPlaying:!1};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.TOOGLE_POWER:return Object(l.a)(Object(l.a)({},e),{},{isPowerOn:!e.isPowerOn});case d.CHG_VOLUME:return Object(l.a)(Object(l.a)({},e),{},{volume:t.payload});case d.CHG_BANK:return Object(l.a)(Object(l.a)({},e),{},{currentBank:t.payload});case d.DRUMPAD_PRESS:return Object(l.a)(Object(l.a)({},e),{},{currentSfx:t.payload});case d.TOGGLE_OVERLAY:return Object(l.a)(Object(l.a)({},e),{},{isOverlayShow:!e.isOverlayShow});case d.SET_AUDIO:return Object(l.a)(Object(l.a)({},e),{},{audio:t.payload[0],audioName:t.payload[1]});case d.PLAY_PAUSE:return Object(l.a)(Object(l.a)({},e),{},{isAudioPlaying:!e.isAudioPlaying});case d.RESET_AUDIO:return Object(l.a)(Object(l.a)({},e),{},{isAudioPlaying:!1});default:return e}},h=Object(c.c)(p,Object(c.a)(u.a)),v=a(3),E=a(4),b=a(6),f=a(5),A=a(1),O=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).getBankName=n.getBankName.bind(Object(A.a)(n)),n}return Object(E.a)(a,[{key:"getBankName",value:function(e){switch(e){case 0:return"Acoustic";case 1:return"Jihong";case 2:return"8-Bit";default:return"Unknown Bank"}}},{key:"render",value:function(){return r.a.createElement("div",{className:"machine-screen",id:"machine-screen"},r.a.createElement("div",{className:"screen-bank ".concat(this.props.isPowerOn?"":"hidden")},r.a.createElement("span",{className:"bank-name",id:"bank-name"},"BANK: "),r.a.createElement("span",{className:"bank-content",id:"bank-content"}," ",this.getBankName(this.props.currentBank)," ")),r.a.createElement("div",{className:"screen-volume ".concat(this.props.isPowerOn?"":"hidden")},r.a.createElement("span",{className:"volumne-name",id:"volume-name"},"VOLUME: "),r.a.createElement("span",{className:"volume-content",id:"volume-content"}," ","".concat(this.props.volume,"%")," ")),r.a.createElement("div",{className:"screen-sfx ".concat(this.props.isPowerOn?"":"hidden")},r.a.createElement("span",{className:"sfx-name",id:"sfx-name"},"SFX: "),r.a.createElement("span",{className:"sfx-content",id:"display"}," ",this.props.currentSfx," ")))}}]),a}(r.a.Component);var P=Object(i.b)((function(e){return{isPowerOn:e.isPowerOn,volume:e.volume,currentBank:e.currentBank,currentSfx:e.currentSfx}}),null)(O),g={togglePower:function(){return{type:d.TOOGLE_POWER}},volumeChange:function(e){return{type:d.CHG_VOLUME,payload:e}},changeBank:function(e){return{type:d.CHG_BANK,payload:e}},drumPadPress:function(e){return{type:d.DRUMPAD_PRESS,payload:e}},toogleOverlay:function(){return{type:d.TOGGLE_OVERLAY}},setAudio:function(e,t){return{type:d.SET_AUDIO,payload:[e,t]}},playPause:function(){return{type:d.PLAY_PAUSE}},resetAudio:function(){return{type:d.RESET_AUDIO}}},y=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).powerBtnPress=n.powerBtnPress.bind(Object(A.a)(n)),n.bankModeChanged=n.bankModeChanged.bind(Object(A.a)(n)),n.volumeBtnPress=n.volumeBtnPress.bind(Object(A.a)(n)),n.openAudioPanel=n.openAudioPanel.bind(Object(A.a)(n)),n.maxVolDegree=300,n}return Object(E.a)(a,[{key:"powerBtnPress",value:function(e){var t=document.getElementById("power-btn");t.className="power-btn btn-press",this.props.togglePower(),setTimeout((function(){t.className="power-btn"}),500)}},{key:"openAudioPanel",value:function(){this.props.toogleOverlay()}},{key:"getRotationStyle",value:function(){var e=this.props.volume*this.maxVolDegree/100;return{transform:"rotate(".concat(e,"deg)")}}},{key:"getRotationVolume",value:function(e){return Math.round(100*e/this.maxVolDegree)}},{key:"volumeBtnPress",value:function(e){var t=this,a=e.target,n=[a.clientHeight,a.clientWidth,a.offsetLeft,a.offsetTop],r=[n[2]+n[1]/2,n[3]+n[0]/2],o=function(e){var a=[e.clientX,e.clientY],n=a[0],o=a[1];if(!n){var s=e.touches[0];n=s.clientX,o=s.clientY}var i=180*Math.atan(Math.abs(r[1]-o)/Math.abs(r[0]-n))/Math.PI;if(n>=r[0]&&o<=r[1])t.props.volumeChange(t.getRotationVolume(90-i));else if(n<=r[0]&&o<=r[1]){if(i>t.maxVolDegree-270)return;t.props.volumeChange(t.getRotationVolume(270+i))}else n<r[0]?t.props.volumeChange(t.getRotationVolume(270-i)):t.props.volumeChange(t.getRotationVolume(90+i))};a.addEventListener("mousemove",o),a.addEventListener("touchmove",o),a.addEventListener("mouseup",(function(){a.removeEventListener("mousemove",o)})),a.addEventListener("mouseleave",(function(){a.removeEventListener("mousemove",o)})),a.addEventListener("touchend",(function(){a.removeEventListener("mousemove",o)}))}},{key:"bankModeChanged",value:function(e){var t=e.target;this.props.changeBank(Math.round(t.value/50))}},{key:"render",value:function(){return r.a.createElement("div",{className:"control-panel"},r.a.createElement("div",{className:"control-volume",id:"control-volume"},r.a.createElement("label",{htmlFor:"volume-spinner"},"Volume: "),r.a.createElement("div",{className:"volume-spinner",id:"volume-spinner",style:this.getRotationStyle(),onMouseDown:this.volumeBtnPress,onTouchMove:this.volumeBtnPress,tabIndex:"0"})),r.a.createElement("div",{className:"control-audio"},r.a.createElement("label",{htmlFor:"audio-panel"},"Audio In"),r.a.createElement("div",{className:"audio-panel",id:"audio-panel",onClick:this.openAudioPanel,tabIndex:"0"})),r.a.createElement("div",{className:"control-power",id:"control-power"},r.a.createElement("button",{type:"button",className:"power-btn",id:"power-btn",onClick:this.powerBtnPress},r.a.createElement("i",{className:"fas fa-power-off"}))),r.a.createElement("div",{className:"control-bank",id:"control-bank"},r.a.createElement("label",{htmlFor:"bank-slider"},r.a.createElement("span",{className:"bank-left"},"Acoustic"),r.a.createElement("span",{className:"bank-mid"},"DJ Jihong"),r.a.createElement("span",{className:"bank-right"},"8 Bit")),r.a.createElement("input",{type:"range",step:"50",className:"bank-slider",id:"bank-slider",onChange:this.bankModeChanged,value:50*this.props.currentBank})))}}]),a}(r.a.Component);var S=Object(i.b)((function(e){return{volume:e.volume,currentBank:e.currentBank}}),(function(e){return{togglePower:function(){return e(g.togglePower())},volumeChange:function(t){return e(g.volumeChange(t))},changeBank:function(t){return e(g.changeBank(t))},toogleOverlay:function(){return e(g.toogleOverlay())}}}))(y),k=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).onDrumPadClick=n.onDrumPadClick.bind(Object(A.a)(n)),n.generateAudioSrc=n.generateAudioSrc.bind(Object(A.a)(n)),n}return Object(E.a)(a,[{key:"onDrumPadClick",value:function(){var e=this.props,t=e.KbKey;(0,e.drumPadPressed)(t,e.audio[0])}},{key:"generateAudioSrc",value:function(e,t){if(e)return r.a.createElement("audio",{className:"clip",src:e,id:t,preload:"auto"})}},{key:"render",value:function(){var e=this.props,t=e.KbKey,a=e.audio;return r.a.createElement("div",{className:"drum-pad",id:"".concat(t,"-btn"),onClick:this.onDrumPadClick,tabIndex:"0"},t,this.generateAudioSrc(a[1],t))}}]),a}(r.a.Component),w={EmptyBank:[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],Bank1:[["Open Hi-hat","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/DrumSoundSelected/CYCdh_ElecK06-OpHat.wav"],["Cymbal","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/DrumSoundSelected/CYCdh_ElecK01-Cymbal.wav"],["Crash","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/DrumSoundSelected/CYCdh_Kurz03-Crash03.wav"],["Clap","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/DrumSoundSelected/CYCdh_ElecK05-Clap01.wav"],["Snare","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/DrumSoundSelected/CYCdh_ElecK05-Snr01.wav"],["Ride","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/DrumSoundSelected/CYCdh_Kurz04-Ride01.wav"],["Kick","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/DrumSoundSelected/CYCdh_ElecK05-Kick02.wav"],["Rim","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/DrumSoundSelected/CYCdh_K2room_Rim-02.wav"],["Closed Hi-hat","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/DrumSoundSelected/CYCdh_ElecK05-ClHat01.wav"]],Bank2:[["Robot 1","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/edited/robot_edited.mp3"],["Robot 2","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/edited/robot_edited2.mp3"],["Solo","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/edited/solo_edited.mp3"],["Drop","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/edited/drop_edited.mp3"],["Snare","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/edited/tu_edited.mp3"],["Bubble","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/edited/bubble_edited.mp3"],["Kick","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/edited/kick_edited.mp3"],["Fart","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/edited/fart_edited.mp3"],["Closed hat","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/edited/hat_edited.mp3"]],Bank3:[["Tom 1","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/FREE%208-BIT%20DRUM%20SAMPLES%20-%20LAVANDERIA%20EST%C3%9ADIO/TOM%201.wav"],["Tom 2","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/FREE%208-BIT%20DRUM%20SAMPLES%20-%20LAVANDERIA%20EST%C3%9ADIO/TOM%202.wav"],["Tom 3","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/FREE%208-BIT%20DRUM%20SAMPLES%20-%20LAVANDERIA%20EST%C3%9ADIO/TOM%203.wav"],["Snare 1","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/FREE%208-BIT%20DRUM%20SAMPLES%20-%20LAVANDERIA%20EST%C3%9ADIO/Snare%201.wav"],["Snare 2","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/FREE%208-BIT%20DRUM%20SAMPLES%20-%20LAVANDERIA%20EST%C3%9ADIO/Snare%202.wav"],["Snare 3","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/FREE%208-BIT%20DRUM%20SAMPLES%20-%20LAVANDERIA%20EST%C3%9ADIO/Snare%203.wav"],["Kick","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/FREE%208-BIT%20DRUM%20SAMPLES%20-%20LAVANDERIA%20EST%C3%9ADIO/KICK.wav"],["Hi-hat Open","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/FREE%208-BIT%20DRUM%20SAMPLES%20-%20LAVANDERIA%20EST%C3%9ADIO/Hat%20Open.wav"],["Hi-hat Closed","https://raw.githubusercontent.com/AdmiJW/Items/master/Misc/FREE%208-BIT%20DRUM%20SAMPLES%20-%20LAVANDERIA%20EST%C3%9ADIO/HH%20Closed.wav"]]},C={Q:0,W:1,E:2,A:3,S:4,D:5,Z:6,X:7,C:8},D=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={bank:w.Bank1},n.drumPadPressed=n.drumPadPressed.bind(Object(A.a)(n)),n}return Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=this;for(var t in document.addEventListener("keydown",(function(t){e.drumPadPressed(t.key.toUpperCase())})),w)w[t].forEach((function(t){t[1]&&fetch(t[1]).then((function(e){return e.blob()})).then((function(a){var n=new FileReader;n.onload=function(){t[1]=n.result,e.forceUpdate()},n.readAsDataURL(a)}))}))}},{key:"drumPadPressed",value:function(e){if(void 0!==C[e]){var t=this.props,a=t.volume,n=t.drumPadPress,r=document.getElementById(e),o=document.getElementById(e+"-btn");r&&(r.volume=a/100,r.currentTime=0,r.play()),n(this.state.bank[C[e]][0]),o.className="drum-pad btn-press",setTimeout((function(){o.className="drum-pad"}),100)}}},{key:"render",value:function(){var e=this.state.bank;return r.a.createElement("div",{className:"drum-pad-container"},r.a.createElement(k,{KbKey:"Q",drumPadPressed:this.drumPadPressed,audio:e[0]}),r.a.createElement(k,{KbKey:"W",drumPadPressed:this.drumPadPressed,audio:e[1]}),r.a.createElement(k,{KbKey:"E",drumPadPressed:this.drumPadPressed,audio:e[2]}),r.a.createElement(k,{KbKey:"A",drumPadPressed:this.drumPadPressed,audio:e[3]}),r.a.createElement(k,{KbKey:"S",drumPadPressed:this.drumPadPressed,audio:e[4]}),r.a.createElement(k,{KbKey:"D",drumPadPressed:this.drumPadPressed,audio:e[5]}),r.a.createElement(k,{KbKey:"Z",drumPadPressed:this.drumPadPressed,audio:e[6]}),r.a.createElement(k,{KbKey:"X",drumPadPressed:this.drumPadPressed,audio:e[7]}),r.a.createElement(k,{KbKey:"C",drumPadPressed:this.drumPadPressed,audio:e[8]}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.isPowerOn,n=e.isOverlayShow,r=e.currentBank;return{bank:a&&!n?0===r?w.Bank1:1===r?w.Bank2:w.Bank3:w.EmptyBank}}}]),a}(r.a.Component);var I=Object(i.b)((function(e){return{isPowerOn:e.isPowerOn,volume:e.volume,currentBank:e.currentBank,isOverlayShow:e.isOverlayShow}}),(function(e){return{drumPadPress:function(t){return e(g.drumPadPress(t))}}}))(D),N=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(E.a)(a,[{key:"render",value:function(){return r.a.createElement("main",{className:"drum-machine",id:"drum-machine"},r.a.createElement(P,null),r.a.createElement(S,null),r.a.createElement(I,null))}}]),a}(r.a.Component),B=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).audiofileChanged=n.audiofileChanged.bind(Object(A.a)(n)),n.playPauseBtn=n.playPauseBtn.bind(Object(A.a)(n)),n.resetBtn=n.resetBtn.bind(Object(A.a)(n)),n.volChanged=n.volChanged.bind(Object(A.a)(n)),n}return Object(E.a)(a,[{key:"audiofileChanged",value:function(e){var t=this;e.preventDefault();var a=this.props,n=a.audio,r=(a.volume,a.setAudio),o=e.target,s=document.createElement("audio");s.volume=document.getElementById("audiosrc-volume-input").value,s.onended=function(){t.resetBtn()};var i=new FileReader;if("audiosrc-local-input"===e.target.id){var c=o.files[0];c&&c.type.startsWith("audio")?(n&&n.pause(),i.onload=function(){s.src=i.result,r(s,c.name),t.resetBtn()},i.readAsDataURL(c)):alert("You are not providing a valid audio file!")}else if("audiosrc"===e.target.id){var u=document.getElementById("audiosrc-online-input").value;fetch(u).then((function(e){return e.blob()})).then((function(e){if(!e.type.startsWith("audio"))return Promise.reject();n&&n.pause(),i.onload=function(){s.src=i.result,r(s,u),t.resetBtn()},i.readAsDataURL(e)})).catch((function(e){alert("Unable to load Audio URL!")}))}}},{key:"playPauseBtn",value:function(){var e=this.props,t=e.audio,a=e.isAudioPlaying,n=e.playPause;t&&(a?(t.pause(),n()):(t.play(),n()))}},{key:"resetBtn",value:function(){var e=this.props,t=e.audio,a=e.resetAudio;t&&(t.pause(),t.currentTime=0),a()}},{key:"volChanged",value:function(e){var t=this.props.audio;t&&(t.volume=e.target.value)}},{key:"componentDidMount",value:function(){var e=this;document.getElementById("audiosrc-close-btn").addEventListener("click",(function(){e.props.toogleOverlay()}))}},{key:"render",value:function(){var e=this.props,t=e.isOverlayShow,a=e.audioName,n=e.isAudioPlaying;return r.a.createElement("div",{className:"overlay ".concat(t?"":"closed-invis"),id:"overlay"},r.a.createElement("form",{className:"audiosrc",id:"audiosrc",onSubmit:this.audiofileChanged},r.a.createElement("div",{className:"audiosrc-close",id:"audiosrc-close"},r.a.createElement("i",{className:"fas fa-times",id:"audiosrc-close-btn"})),r.a.createElement("div",{className:"audiosrc-local",id:"audiosrc-local"},r.a.createElement("p",null,"CD Insert Here ",r.a.createElement("i",{className:"fas fa-caret-down"})),r.a.createElement("p",null,r.a.createElement("small",null,"(Select Audio file from local machine) ")),r.a.createElement("div",{className:"cd-insert",id:"cd-insert",tabIndex:"0"},r.a.createElement("label",{htmlFor:"audiosrc-local-input"},r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/DVD_logo.svg/1280px-DVD_logo.svg.png",alt:"DVD logo"}))),r.a.createElement("input",{type:"file",className:"audiosrc-local-input hidden",id:"audiosrc-local-input",accept:"audio/*",onChange:this.audiofileChanged})),r.a.createElement("div",{className:"audiosrc-online",id:"audiosrc-online"},r.a.createElement("label",{htmlFor:"audiosrc-online-input"},"Internet"),r.a.createElement("p",null,r.a.createElement("small",null,"(Only raw files allowed)")),r.a.createElement("input",{className:"audiosrc-online-input",id:"audiosrc-online-input",type:"url",placeholder:"Enter URL here...",defaultValue:"https://assets.mixkit.co/music/preview/mixkit-cat-walk-371.mp3"}),r.a.createElement("input",{type:"submit",className:"audiosrc-online-submit",id:"audiosrc-online-submit",value:"Go >"})),r.a.createElement("div",{className:"audiosrc-control",id:"audiosrc-control"},r.a.createElement("p",null,"Currently Loaded Audio: "),r.a.createElement("p",{className:"audiosrc-selected",id:"audiosrc-selected"},a||"Null"),r.a.createElement("button",{type:"button",className:"audiosrc-startpause",id:"audiosrc-startpause",onClick:this.playPauseBtn},r.a.createElement("i",{className:"fas ".concat(n?"fa-pause":"fa-play")})),r.a.createElement("button",{type:"button",className:"audiosrc-reset",id:"audiosrc-reset",onClick:this.resetBtn},r.a.createElement("i",{className:"fas fa-undo"}))),r.a.createElement("div",{className:"audiosrc-volume",id:"audiosrc-volume"},r.a.createElement("label",{htmlFor:"audiosrc-vol-input"},"Volume: "),r.a.createElement("input",{type:"range",className:"audiosrc-volume-input",id:"audiosrc-volume-input",min:"0",max:"1",step:"0.01",onInput:this.volChanged}))))}}]),a}(r.a.Component);var M=Object(i.b)((function(e){return{volume:e.volume,isOverlayShow:e.isOverlayShow,audio:e.audio,audioName:e.audioName,isAudioPlaying:e.isAudioPlaying}}),(function(e){return{toogleOverlay:function(){return e(g.toogleOverlay())},setAudio:function(t,a){return e(g.setAudio(t,a))},playPause:function(){return e(g.playPause())},resetAudio:function(){return e(g.resetAudio())}}}))(B);a(26);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:h},r.a.createElement(N,null),r.a.createElement(M,null))),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.e18bbc78.chunk.js.map